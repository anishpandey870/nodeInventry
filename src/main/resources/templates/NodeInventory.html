<!DOCTYPE html>
<html>
	<head>
		<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
	<meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.18/css/jquery.dataTables.css"/>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.18/js/jquery.dataTables.js"></script>
    <link href="https://cdn.datatables.net/1.10.16/css/jquery.dataTables.min.css" rel="stylesheet" />
<script src="https://ajax.googleapis.com//ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@9"></script>
	<script src="https://cdn.datatables.net/1.10.16/js/jquery.dataTables.min.js"></script>
	
	<link rel="stylesheet" href="css/home1.css">
	
	
<script>
    $(function () {
        $('.shelf_datatable').DataTable({
   "language": {
    "search": "",
    "searchPlaceholder": "Search..."
  },
  "pageLength": 5,
  "lengthMenu": [5, 7,10, 15, 20 ],
  "dom": '<"top"lf><"clear">rt<"bottom"ip><"clear">',
       
  
});
    });
    
    $(function () {
        $('.card_datatable').DataTable({
  "language": {
    "search": "",
    "searchPlaceholder": "Search..."
  },
  "pageLength": 5,
  "lengthMenu": [ 5,7,10, 15, 20 ],
  "dom": '<"top"lf><"clear">rt<"bottom"ip><"clear">',
       
  
});
    });
    
     $(function () {
        $('.port_datatable').DataTable({
  "language": {
    "search": "",
    "searchPlaceholder": "Search..."
  },
  "pageLength": 5,
  "lengthMenu": [ 5,7,10, 15, 20 ],
  "dom": '<"top"lf><"clear">rt<"bottom"ip><"clear">',
       
  
});

});
       
</script>
	</head>
	<body>
		
		<div>
				<nav class="navbar">
				<div class="logo-container">
    				<img src="vcti logo.jpg" alt="Logo" >
   						 <span><h2>Inventory</h2></span>
  				</div>
  			
				<div class="nav-right">
					<a href="/">logout</a>
					<i class="fa fa-home"></i>
					<a th:href="@{/node(Name=${name},NetworkName=${nname},IpAddress=${ip},EmsId=${ems})}"  >Home</a>
					
  
				</div>
			</nav>
		</div>
		
		
		
		
		<div class="shelf_table">
			<table class="shelf_datatable">
				<thead class="shelf_table_head">
					<tr>
						<th>Action</th>
						<th>Id</th>
						<th>Name</th>
						<th>CLEI</th>
						<th>HWREV</th>
						<th>Part No</th>
						<th>Serial Number</th>
						<th>Position</th>
						<th>Cot Id</th>
						<th>Ip Address</th>
						<th>EMS Id</th>
						<th>COT</th>
						
					</tr>
				</thead>
				
				<tbody>
					
            <tr class="get_shelfs" th:each="shelf : ${shelfs}">
				<td ><i class="arrow right"></i></td>
				<td th:text="${shelf .ID}" />
                <td th:text="${shelf .NAME}" />
                <td th:text="${shelf .CLEI}" />
                <td th:text="${shelf .HWREV}" />
                <td th:text="${shelf .PARTNO}" />
                <td th:text="${shelf .SERIALNUMBER}" />
                <td th:text="${shelf .POSITION}" />
                <td th:text="${shelf .COTID}" />
                <td th:text="${shelf .IPADDRESS}" />
                <td th:text="${shelf .EMSID}" />
                <td th:text="${shelf .COT}" />
          
               
            </tr>
        </tbody>
			</table>
		</div>
		<div class="card_port">
		<div class="card_table">
			<table class="card_datatable">
				<thead class="card_table_head">
					<tr>
						<th>Action</th>
						<th>Id</th>
						<th>Name</th>
						<th>CLEI</th>
						<th>Equipped type</th>
						<th>Actual Type</th>
						<th>Oper Status</th>
						<th>Part Number</th>
						<th>Serial Number</th>
						<th>Position</th>
						<th>SW Version</th>
						<th>Admin status</th>
						
					</tr>
				</thead>

				<tbody>
					
            <tr class="get_shelfs" th:each="card : ${cards}">
				<td><a class="btn btn-primary"><i class="arrow right"></i></a></td>
				<td th:text="${card .ID}" />
                <td th:text="${card .NAME}" />
                <td th:text="${card .CLEI}" />
                <td th:text="${card .EQUIPPEDTYPE}" />
                <td th:text="${card .ACTUALTYPE}" />
                <td th:text="${card .OPERSTATUS}" />
                <td th:text="${card .PARTNO}" />
                <td th:text="${card .SERNO}" />
                <td th:text="${card .POSITION}" />
                <td th:text="${card .SWVERSION}" />
                <td th:text="${card .ADMINSTATUS}" />
                
            </tr>
        </tbody>
			</table>
		</div>
		
		<div class="port_table">
			<table class="port_datatable">
				<thead class="port_table_head">
					<tr>
						<th>Id</th>
						<th>Name</th>
						<th>Position</th>
						<th>Port Type</th>
						<th>Actual Type</th>
						<th>Admin Status</th>
						<th>Oper Status</th>
						<th>Part Number</th>
						<th>Serial Number</th>
						<th>Profile</th>
						<th>SCP</th>
					</tr>
				</thead>
			<tbody>
					
            <tr class="get_shelfs" th:each="port : ${ports}">
				
				<td th:text="${port .ID}" />
                <td th:text="${port .NAME}" />
                <td th:text="${port .POSITION}" />
                <td th:text="${port .PORTTYPE}" />
                <td th:text="${port .ACTUALTYPE}" />
                <td th:text="${port .ADMINSTATUS}" />
                <td th:text="${port .OPERSTATUS}" />
                <td th:text="${port .PARTNO}" />
                <td th:text="${port .SERNO}" />
                <td th:text="${port .PROFILE}" />
                <td th:text="${port .SCP}" />
            
            </tr>
        </tbody>
			</table>
		</div>
		
		</div>
<script>
	
	
	
	$(document).ready(function() {
   var shelf_table = $('.shelf_datatable').DataTable();
    var card_table = $('.card_datatable').DataTable();
    var port_table = $('.port_datatable').DataTable();
    
    $(shelf_table.row(0).node()).addClass('selected');
	$(card_table.row(0).node()).addClass('selected');

    
    
	$('.shelf_datatable tbody').on( 'click', 'tr', function () {
		
		
		var row = shelf_table.row(this).data();
    	console.log( row);
    	
    	if ($(this).find('td:eq(0)').is(':hover')) {
			$('.shelf_datatable tbody tr').removeClass('selected');
		
		$(this).addClass('selected');
			
			
			 $.ajax({
      		url: '/card',
     	 	method: 'POST', 
      		data: { RowId: row[1] },
      		success: function(cards) {
				  card_table.clear().draw();
			  for (let i = 0; i < cards.length; i++) {
                  var l = ["<i class=\"arrow right\"></i>",cards[i].id,cards[i].name,cards[i].clei,cards[i].equippedtype
                  ,cards[i].actualtype,cards[i].operstatus,cards[i].partno,cards[i].serno,cards[i].position,cards[i].swversion,cards[i].adminstatus];
                  console.log(l);
                  card_table.row.add(l).draw();
                  
                  
                  }
               $(card_table.row(0).node()).addClass('selected');
                  $.ajax({
      		        url: '/port',
     	 			method: 'POST', 
      				data: { RowId: cards[0].id},
      				success: function(ports) {
				  port_table.clear().draw();
				  for (let i = 0; i < ports.length; i++) {
                  var l = [ports[i].id,ports[i].name,ports[i].position,ports[i].porttype
                  ,ports[i].actualtype,ports[i].adminstatus,ports[i].operstatus,ports[i].partno,ports[i].serno,ports[i].profile,ports[i].scp];
                  console.log(l);
                  port_table.row.add(l).draw();
                  
                  
                  }
                  
			  }
			  
		});
                  
			  }
			  
		}); 
		
		
		 
    }   
  });
  
  
  $('.card_datatable tbody').on( 'click', 'tr', function () {
		
		var row = card_table.row(this).data();
    	console.log( row);
    	
    	if ($(this).find('td:eq(0)').is(':hover')) {
			$('.card_datatable tbody tr').removeClass('selected');
  
		$(this).addClass('selected');
		
		 $.ajax({
      		url: '/port',
     	 	method: 'POST', 
      		data: { RowId: row[1] },
      		success: function(ports) {
				  port_table.clear().draw();
				  for (let i = 0; i < ports.length; i++) {
                  var l = [ports[i].id,ports[i].name,ports[i].position,ports[i].porttype
                  ,ports[i].actualtype,ports[i].adminstatus,ports[i].operstatus,ports[i].partno,ports[i].serno,ports[i].profile,ports[i].scp];
                  console.log(l);
                  port_table.row.add(l).draw();
                  
                  
                  }
                  
			  }
			  
		}); 
    }   
  });
  
  
  
  
});


</script>


	</body>
</html>